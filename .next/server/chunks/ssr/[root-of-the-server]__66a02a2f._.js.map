{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///Users/yusufmertyavuz/Desktop/nakliyeemm/src/app/veritabani-yonetimi/araclar/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\n\ninterface Sirket {\n  sirket_id: number;\n  sirket_adi: string;\n}\n\ninterface Arac {\n  arac_id: number;\n  plaka: string;\n  sofor_adi: string;\n  vergi_numarasi: string;\n  sirket_id: number;\n  sirket?: Sirket;\n}\n\nexport default function AraclarListesi() {\n  const router = useRouter();\n  const [araclar, setAraclar] = useState<Arac[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [siliniyor, setSiliniyor] = useState<number | null>(null);\n\n  useEffect(() => {\n    fetchAraclar();\n  }, []);\n\n  const fetchAraclar = async () => {\n    try {\n      const response = await fetch('/api/araclar');\n      \n      if (!response.ok) {\n        throw new Error('Araçlar yüklenirken bir hata oluştu');\n      }\n      \n      const data = await response.json();\n      setAraclar(data);\n    } catch (err: any) {\n      setError(err.message);\n      console.error('Araçları getirme hatası:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSil = async (aracId: number) => {\n    if (!confirm('Bu aracı silmek istediğinize emin misiniz?')) {\n      return;\n    }\n\n    setSiliniyor(aracId);\n\n    try {\n      const response = await fetch(`/api/araclar/${aracId}`, {\n        method: 'DELETE',\n      });\n\n      if (!response.ok) {\n        const data = await response.json();\n        throw new Error(data.error || 'Araç silinirken bir hata oluştu');\n      }\n\n      setAraclar(araclar.filter(arac => arac.arac_id !== aracId));\n    } catch (err: any) {\n      alert(`Hata: ${err.message}`);\n      console.error('Araç silme hatası:', err);\n    } finally {\n      setSiliniyor(null);\n    }\n  };\n\n  return (\n    <main className=\"flex min-h-screen flex-col items-center p-12\">\n      <div className=\"w-full max-w-5xl\">\n        <div className=\"flex justify-between items-center mb-8\">\n          <h1 className=\"text-3xl font-bold\">Araçlar</h1>\n          <div className=\"flex space-x-2\">\n            <Link href=\"/veritabani-yonetimi\" className=\"p-2 border rounded-md hover:bg-gray-100\">\n              Geri Dön\n            </Link>\n            <Link href=\"/veritabani-yonetimi/araclar/ekle\" className=\"p-2 bg-green-500 text-white rounded-md hover:bg-green-600\">\n              Yeni Araç Ekle\n            </Link>\n          </div>\n        </div>\n\n        {error && (\n          <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4\">\n            <span className=\"block sm:inline\">{error}</span>\n          </div>\n        )}\n\n        {loading ? (\n          <div className=\"text-center py-10\">\n            <p className=\"text-gray-500\">Araçlar yükleniyor...</p>\n          </div>\n        ) : araclar.length === 0 ? (\n          <div className=\"text-center py-10 border rounded-lg\">\n            <p className=\"text-gray-500\">Kayıtlı araç bulunamadı.</p>\n            <Link href=\"/veritabani-yonetimi/araclar/ekle\" className=\"mt-4 inline-block p-2 bg-blue-500 text-white rounded-md hover:bg-blue-600\">\n              Yeni Araç Ekle\n            </Link>\n          </div>\n        ) : (\n          <div className=\"bg-white shadow-md rounded-lg overflow-hidden\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    ID\n                  </th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Plaka\n                  </th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Şoför Adı\n                  </th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Vergi Numarası\n                  </th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Şirket\n                  </th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    İşlemler\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {araclar.map((arac) => (\n                  <tr key={arac.arac_id}>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                      {arac.arac_id}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                      {arac.plaka}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                      {arac.sofor_adi}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                      {arac.vergi_numarasi}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                      {arac.sirket?.sirket_adi || '-'}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                      <div className=\"flex space-x-2\">\n                        <Link \n                          href={`/veritabani-yonetimi/araclar/${arac.arac_id}/duzenle`} \n                          className=\"text-indigo-600 hover:text-indigo-900\"\n                        >\n                          Düzenle\n                        </Link>\n                        <button \n                          onClick={() => handleSil(arac.arac_id)}\n                          className=\"text-red-600 hover:text-red-900\"\n                          disabled={siliniyor === arac.arac_id}\n                        >\n                          {siliniyor === arac.arac_id ? 'Siliniyor...' : 'Sil'}\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </main>\n  );\n} "],"names":[],"mappings":"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","debugId":null}}]
}