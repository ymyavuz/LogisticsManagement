{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///Users/yusufmertyavuz/Desktop/nakliyeemm/src/app/veritabani-yonetimi/fiyat-listesi/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\n\ntype Sirket = {\n  sirket_id: number;\n  sirket_adi: string;\n};\n\ntype FiyatListesi = {\n  fiyat_listesi_id: number;\n  sirket_id: number;\n  tahliye_yeri: string;\n  km: number | null;\n  arac_tipi: string;\n  ucret: number;\n  sofor_ucreti: number | null;\n  sirket: {\n    sirket_adi: string;\n  };\n};\n\nexport default function FiyatListesi() {\n  const [sirketler, setSirketler] = useState<Sirket[]>([]);\n  const [seciliSirket, setSeciliSirket] = useState<number | null>(null);\n  const [fiyatListesi, setFiyatListesi] = useState<FiyatListesi[]>([]);\n  const [yukleniyor, setYukleniyor] = useState(true);\n  const [hata, setHata] = useState<string | null>(null);\n  const [duzenlemeModu, setDuzenlemeModu] = useState(false);\n  const [degisiklikler, setDegisiklikler] = useState<any[]>([]);\n  const [kaydediliyor, setKaydediliyor] = useState(false);\n\n  // Şirketleri getir\n  useEffect(() => {\n    const fetchSirketler = async () => {\n      try {\n        const response = await fetch('/api/sirketler');\n        if (!response.ok) {\n          throw new Error('Şirketler yüklenirken bir hata oluştu');\n        }\n        const data = await response.json();\n        setSirketler(data);\n      } catch (error) {\n        console.error('Şirketler yüklenirken hata:', error);\n        setHata('Şirketler yüklenirken bir hata oluştu');\n      }\n    };\n\n    fetchSirketler();\n  }, []);\n\n  // Fiyat listelerini getir\n  useEffect(() => {\n    const fetchFiyatListesi = async () => {\n      setYukleniyor(true);\n      setHata(null);\n\n      try {\n        // Birleştirilmiş API'ye istek yap\n        let url = `/api/fiyat-listesi`;\n        if (seciliSirket) {\n          url += `?sirket_id=${seciliSirket}`;\n        }\n\n        const response = await fetch(url);\n        if (!response.ok) {\n          throw new Error('Fiyat listesi yüklenirken bir hata oluştu');\n        }\n\n        const data = await response.json();\n        setFiyatListesi(data);\n      } catch (error) {\n        console.error('Fiyat listesi yüklenirken hata:', error);\n        setHata('Fiyat listesi yüklenirken bir hata oluştu');\n      } finally {\n        setYukleniyor(false);\n      }\n    };\n\n    fetchFiyatListesi();\n  }, [seciliSirket]);\n\n  // Fiyat değişikliği işleyicisi\n  const handleFiyatDegisikligi = (\n    fiyatListeId: number | undefined, \n    alan: string, \n    deger: number | null,\n    sirketId?: number,\n    tahliyeYeri?: string,\n    aracTipi?: string\n  ) => {\n    // Eğer fiyat_listesi_id yoksa, yeni kayıt için geçici bir ID oluştur\n    const kayitId = fiyatListeId || `new|||${sirketId}|||${tahliyeYeri}|||${aracTipi}`;\n    \n    // Mevcut değişiklik varsa güncelle, yoksa ekle\n    const mevcutIndex = degisiklikler.findIndex(\n      (d) => d.fiyat_listesi_id === kayitId || d.id === kayitId\n    );\n    \n    if (mevcutIndex >= 0) {\n      const yeniDegisiklikler = [...degisiklikler];\n      yeniDegisiklikler[mevcutIndex] = {\n        ...yeniDegisiklikler[mevcutIndex],\n        [alan]: deger\n      };\n      setDegisiklikler(yeniDegisiklikler);\n    } else {\n      const yeniDegisiklik: any = {\n        [alan]: deger\n      };\n      \n      if (fiyatListeId) {\n        yeniDegisiklik.fiyat_listesi_id = fiyatListeId;\n      } else {\n        // Yeni kayıt için gerekli bilgileri ekle\n        yeniDegisiklik.id = kayitId;\n        yeniDegisiklik.sirket_id = sirketId;\n        yeniDegisiklik.tahliye_yeri = tahliyeYeri;\n        yeniDegisiklik.arac_tipi = aracTipi;\n        yeniDegisiklik.isNew = true;\n      }\n      \n      setDegisiklikler([...degisiklikler, yeniDegisiklik]);\n    }\n  };\n\n  // Değişiklikleri kaydet\n  const degisiklikleriKaydet = async () => {\n    setKaydediliyor(true);\n    setHata(null);\n    \n    console.log('Kaydedilecek değişiklikler:', degisiklikler);\n    \n    try {\n      // Her bir değişiklik için API çağrısı yap\n      const sonuclar = await Promise.all(\n        degisiklikler.map(async (degisiklik) => {\n          if (degisiklik.isNew) {\n            // Yeni kayıt için validation\n            if (!degisiklik.sirket_id || !degisiklik.tahliye_yeri || !degisiklik.arac_tipi) {\n              console.error('Eksik veri:', {\n                sirket_id: degisiklik.sirket_id,\n                tahliye_yeri: degisiklik.tahliye_yeri,\n                arac_tipi: degisiklik.arac_tipi\n              });\n              throw new Error('Yeni kayıt için gerekli veriler eksik');\n            }\n            \n            // Yeni kayıt oluştur\n            const postData = {\n              sirket_id: degisiklik.sirket_id,\n              tahliye_yeri: degisiklik.tahliye_yeri,\n              arac_tipi: degisiklik.arac_tipi,\n              ucret: degisiklik.ucret || 0,\n              sofor_ucreti: degisiklik.sofor_ucreti || null,\n              km: null\n            };\n            console.log('POST verisi gönderiliyor:', postData);\n            \n            const response = await fetch('/api/fiyat-listesi', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify(postData),\n            });\n            \n            if (!response.ok) {\n              const errorData = await response.json();\n              console.error('POST API Hatası:', errorData);\n              throw new Error(`Yeni kayıt oluşturulurken hata oluştu: ${errorData.error || response.statusText}`);\n            }\n            \n            return await response.json();\n          } else {\n            // Mevcut kaydı güncelle\n            const response = await fetch(`/api/fiyat-listesi/${degisiklik.fiyat_listesi_id}`, {\n              method: 'PUT',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify(degisiklik),\n            });\n            \n            if (!response.ok) {\n              throw new Error(`ID:${degisiklik.fiyat_listesi_id} güncellenirken hata oluştu`);\n            }\n            \n            return await response.json();\n          }\n        })\n      );\n      \n      // Değişiklik yapılınca listeyi yenile\n      const yeniUrl = `/api/fiyat-listesi${seciliSirket ? `?sirket_id=${seciliSirket}` : ''}`;\n      const response = await fetch(yeniUrl);\n      if (!response.ok) {\n        throw new Error('Güncel fiyat listesi yüklenirken bir hata oluştu');\n      }\n      const güncelListe = await response.json();\n      setFiyatListesi(güncelListe);\n      \n      // Düzenleme modunu kapat ve değişiklikleri temizle\n      setDuzenlemeModu(false);\n      setDegisiklikler([]);\n      \n    } catch (error) {\n      console.error('Değişiklikler kaydedilirken hata:', error);\n      setHata('Değişiklikler kaydedilirken bir hata oluştu');\n    } finally {\n      setKaydediliyor(false);\n    }\n  };\n\n  // Düzenleme modunu iptal et\n  const duzenlemeyiIptalEt = () => {\n    setDuzenlemeModu(false);\n    setDegisiklikler([]);\n  };\n\n  // Fiyatları gruplandırarak görüntüle - şimdi hem şirket hem şoför fiyatlarını içeriyor\n  const gruplandirFiyatlar = (fiyatlar: FiyatListesi[]) => {\n    const gruplar: Record<\n      string, \n      {\n        sirket_tir: number | null;\n        sirket_kirkayak: number | null;\n        sofor_tir: number | null;\n        sofor_kirkayak: number | null;\n        km: number | null;\n        fiyat_ids: {\n          tir_id?: number;\n          kirkayak_id?: number;\n        };\n      }\n    > = {};\n\n    fiyatlar.forEach((fiyat) => {\n      const key = `${fiyat.sirket_id}|||${fiyat.tahliye_yeri}`; // ||| ayırıcı kullan\n      \n      if (!gruplar[key]) {\n        gruplar[key] = {\n          sirket_tir: null,\n          sirket_kirkayak: null,\n          sofor_tir: null,\n          sofor_kirkayak: null,\n          km: fiyat.km,\n          fiyat_ids: {}\n        };\n      }\n\n      if (fiyat.arac_tipi === 'Tır') {\n        gruplar[key].sirket_tir = fiyat.ucret;\n        gruplar[key].sofor_tir = fiyat.sofor_ucreti;\n        gruplar[key].fiyat_ids.tir_id = fiyat.fiyat_listesi_id;\n      } else if (fiyat.arac_tipi === 'Kırkayak') {\n        gruplar[key].sirket_kirkayak = fiyat.ucret;\n        gruplar[key].sofor_kirkayak = fiyat.sofor_ucreti;\n        gruplar[key].fiyat_ids.kirkayak_id = fiyat.fiyat_listesi_id;\n      }\n    });\n\n    return Object.entries(gruplar).map(([key, degerler]) => {\n      const [sirketId, tahliyeYeri] = key.split('|||'); // ||| ayırıcı ile böl\n      const sirket = sirketler.find((s) => s.sirket_id === parseInt(sirketId));\n\n      return {\n        sirket_id: parseInt(sirketId),\n        sirket_adi: sirket?.sirket_adi || 'Bilinmeyen Şirket',\n        tahliye_yeri: tahliyeYeri,\n        km: degerler.km,\n        sirket_tir_ucret: degerler.sirket_tir,\n        sirket_kirkayak_ucret: degerler.sirket_kirkayak,\n        sofor_tir_ucret: degerler.sofor_tir,\n        sofor_kirkayak_ucret: degerler.sofor_kirkayak,\n        fiyat_ids: degerler.fiyat_ids\n      };\n    });\n  };\n\n  // Değişikliklerdeki değeri al veya orijinal değeri döndür\n  const getDeger = (fiyatId: number | undefined, alan: string, varsayilanDeger: number | null, sirketId?: number, tahliyeYeri?: string, aracTipi?: string) => {\n    const kayitId = fiyatId || `new|||${sirketId}|||${tahliyeYeri}|||${aracTipi}`;\n    \n    const degisiklik = degisiklikler.find(d => d.fiyat_listesi_id === kayitId || d.id === kayitId);\n    if (!degisiklik || degisiklik[alan] === undefined) return varsayilanDeger;\n    \n    return degisiklik[alan];\n  };\n\n  // Fiyat listesini gruplandır\n  const grupluFiyatlar = gruplandirFiyatlar(fiyatListesi);\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <h1 className=\"text-3xl font-bold mb-6\">Fiyat Listeleri</h1>\n\n      {/* Filtreler */}\n      <div className=\"bg-white rounded-lg shadow-md p-6 mb-8\">\n          <div>\n            <label className=\"block mb-2 font-medium\">Şirket Filtresi</label>\n            <select\n              value={seciliSirket || ''}\n              onChange={(e) => setSeciliSirket(e.target.value ? parseInt(e.target.value) : null)}\n            className=\"max-w-md p-2 border rounded-md\"\n            disabled={duzenlemeModu}\n            >\n              <option value=\"\">Tüm Şirketler</option>\n              {sirketler.map((sirket) => (\n                <option key={sirket.sirket_id} value={sirket.sirket_id}>\n                  {sirket.sirket_adi}\n                </option>\n              ))}\n            </select>\n        </div>\n      </div>\n\n      {/* Hata Mesajı */}\n      {hata && (\n        <div className=\"bg-red-100 text-red-800 p-4 rounded-md mb-6\">{hata}</div>\n      )}\n\n      {/* Yükleniyor Göstergesi */}\n      {yukleniyor && (\n        <div className=\"text-center py-8\">\n          <p className=\"text-gray-500\">Fiyat listeleri yükleniyor...</p>\n        </div>\n      )}\n\n      {/* Birleştirilmiş Fiyat Tablosu */}\n      {!yukleniyor && grupluFiyatlar.length > 0 && (\n        <div className=\"bg-white rounded-lg shadow-md p-6 mb-8\">\n          <div className=\"flex justify-between items-center mb-4\">\n            <h2 className=\"text-xl font-semibold\">Fiyat Listesi</h2>\n            <div>\n              {!duzenlemeModu ? (\n                <button\n                  onClick={() => setDuzenlemeModu(true)}\n                  className=\"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600\"\n                >\n                  Düzenle\n                </button>\n              ) : (\n                <div className=\"flex gap-2\">\n                  <button\n                    onClick={degisiklikleriKaydet}\n                    disabled={kaydediliyor}\n                    className={`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 ${\n                      kaydediliyor ? 'opacity-50 cursor-not-allowed' : ''\n                    }`}\n                  >\n                    {kaydediliyor ? 'Kaydediliyor...' : 'Kaydet'}\n                  </button>\n                  <button\n                    onClick={duzenlemeyiIptalEt}\n                    disabled={kaydediliyor}\n                    className={`px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 ${\n                      kaydediliyor ? 'opacity-50 cursor-not-allowed' : ''\n                    }`}\n                  >\n                    İptal\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full bg-white border\">\n              <thead className=\"bg-gray-100\">\n                <tr>\n                  <th className=\"py-2 px-4 border text-left\">Şirket</th>\n                  <th className=\"py-2 px-4 border text-left\">Varış Noktası</th>\n                  <th className=\"py-2 px-4 border text-left\">Km</th>\n                  <th className=\"py-2 px-4 border text-left\" colSpan={2}>\n                    Şirket Fiyatları (₺)\n                  </th>\n                  <th className=\"py-2 px-4 border text-left\" colSpan={2}>\n                    Şoför Fiyatları (₺)\n                  </th>\n                </tr>\n                <tr>\n                  <th className=\"py-2 px-4 border text-left\"></th>\n                  <th className=\"py-2 px-4 border text-left\"></th>\n                  <th className=\"py-2 px-4 border text-left\"></th>\n                  <th className=\"py-2 px-4 border text-left\">Tır</th>\n                  <th className=\"py-2 px-4 border text-left\">Kırkayak</th>\n                  <th className=\"py-2 px-4 border text-left\">Tır</th>\n                  <th className=\"py-2 px-4 border text-left\">Kırkayak</th>\n                </tr>\n              </thead>\n              <tbody>\n                {grupluFiyatlar.map((fiyat, index) => (\n                  <tr key={index} className={index % 2 === 0 ? 'bg-gray-50' : ''}>\n                    <td className=\"py-2 px-4 border\">{fiyat.sirket_adi}</td>\n                    <td className=\"py-2 px-4 border\">{fiyat.tahliye_yeri}</td>\n                    <td className=\"py-2 px-4 border\">{fiyat.km || '-'}</td>\n                    \n                    {/* Şirket Tır Ücreti */}\n                    <td className=\"py-2 px-4 border\">\n                      {duzenlemeModu ? (\n                        <input\n                          type=\"number\"\n                          value={getDeger(fiyat.fiyat_ids.tir_id, 'ucret', fiyat.sirket_tir_ucret, fiyat.sirket_id, fiyat.tahliye_yeri, 'Tır') || ''}\n                          onChange={(e) => \n                            handleFiyatDegisikligi(\n                              fiyat.fiyat_ids.tir_id,\n                              'ucret',\n                              e.target.value ? Number(e.target.value) : null,\n                              fiyat.sirket_id,\n                              fiyat.tahliye_yeri,\n                              'Tır'\n                            )\n                          }\n                          className=\"w-24 p-1 border rounded\"\n                          placeholder=\"Tır fiyatı\"\n                        />\n                      ) : (\n                        fiyat.sirket_tir_ucret !== null ? `${fiyat.sirket_tir_ucret} ₺` : '-'\n                      )}\n                    </td>\n                    \n                    {/* Şirket Kırkayak Ücreti */}\n                    <td className=\"py-2 px-4 border\">\n                      {duzenlemeModu ? (\n                        <input\n                          type=\"number\"\n                          value={getDeger(fiyat.fiyat_ids.kirkayak_id, 'ucret', fiyat.sirket_kirkayak_ucret, fiyat.sirket_id, fiyat.tahliye_yeri, 'Kırkayak') || ''}\n                          onChange={(e) => \n                            handleFiyatDegisikligi(\n                              fiyat.fiyat_ids.kirkayak_id,\n                              'ucret',\n                              e.target.value ? Number(e.target.value) : null,\n                              fiyat.sirket_id,\n                              fiyat.tahliye_yeri,\n                              'Kırkayak'\n                            )\n                          }\n                          className=\"w-24 p-1 border rounded\"\n                          placeholder=\"Kırkayak fiyatı\"\n                        />\n                      ) : (\n                        fiyat.sirket_kirkayak_ucret !== null ? `${fiyat.sirket_kirkayak_ucret} ₺` : '-'\n                      )}\n                    </td>\n                    \n                    {/* Şoför Tır Ücreti */}\n                    <td className=\"py-2 px-4 border\">\n                      {duzenlemeModu ? (\n                        <input\n                          type=\"number\"\n                          value={getDeger(fiyat.fiyat_ids.tir_id, 'sofor_ucreti', fiyat.sofor_tir_ucret, fiyat.sirket_id, fiyat.tahliye_yeri, 'Tır') || ''}\n                          onChange={(e) => \n                            handleFiyatDegisikligi(\n                              fiyat.fiyat_ids.tir_id,\n                              'sofor_ucreti',\n                              e.target.value ? Number(e.target.value) : null,\n                              fiyat.sirket_id,\n                              fiyat.tahliye_yeri,\n                              'Tır'\n                            )\n                          }\n                          className=\"w-24 p-1 border rounded\"\n                          placeholder=\"Şoför tır\"\n                        />\n                      ) : (\n                        fiyat.sofor_tir_ucret !== null ? `${fiyat.sofor_tir_ucret} ₺` : '-'\n                      )}\n                    </td>\n                    \n                    {/* Şoför Kırkayak Ücreti */}\n                    <td className=\"py-2 px-4 border\">\n                      {duzenlemeModu ? (\n                        <input\n                          type=\"number\"\n                          value={getDeger(fiyat.fiyat_ids.kirkayak_id, 'sofor_ucreti', fiyat.sofor_kirkayak_ucret, fiyat.sirket_id, fiyat.tahliye_yeri, 'Kırkayak') || ''}\n                          onChange={(e) => \n                            handleFiyatDegisikligi(\n                              fiyat.fiyat_ids.kirkayak_id,\n                              'sofor_ucreti',\n                              e.target.value ? Number(e.target.value) : null,\n                              fiyat.sirket_id,\n                              fiyat.tahliye_yeri,\n                              'Kırkayak'\n                            )\n                          }\n                          className=\"w-24 p-1 border rounded\"\n                          placeholder=\"Şoför kırkayak\"\n                        />\n                      ) : (\n                        fiyat.sofor_kirkayak_ucret !== null ? `${fiyat.sofor_kirkayak_ucret} ₺` : '-'\n                      )}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {!yukleniyor && grupluFiyatlar.length === 0 && (\n        <div className=\"bg-yellow-50 border border-yellow-200 text-yellow-800 p-4 rounded-md mb-8\">\n          Seçilen kriterlere uygun fiyat listesi bulunamadı.\n        </div>\n      )}\n\n      {/* Butonlar */}\n      <div className=\"flex space-x-4\">\n        <Link\n          href=\"/veritabani-yonetimi/fiyat-listesi/ekle\"\n          className=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600\"\n        >\n          Yeni Fiyat Listesi Ekle\n        </Link>\n        <Link\n          href=\"/veritabani-yonetimi\"\n          className=\"px-4 py-2 border rounded-md hover:bg-gray-100\"\n        >\n          Veritabanı Yönetimine Dön\n        </Link>\n      </div>\n    </div>\n  );\n} "],"names":[],"mappings":"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","debugId":null}}]
}