{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///Users/yusufmertyavuz/Desktop/nakliyeemm/src/app/veritabani-yonetimi/sirketler/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\n\ninterface Sirket {\n  sirket_id: number;\n  sirket_adi: string;\n  vergi_numarasi: string;\n}\n\nexport default function SirketlerListesi() {\n  const router = useRouter();\n  const [sirketler, setSirketler] = useState<Sirket[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [siliniyor, setSiliniyor] = useState<number | null>(null);\n\n  useEffect(() => {\n    fetchSirketler();\n  }, []);\n\n  const fetchSirketler = async () => {\n    try {\n      const response = await fetch('/api/sirketler');\n      \n      if (!response.ok) {\n        throw new Error('Şirketler yüklenirken bir hata oluştu');\n      }\n      \n      const data = await response.json();\n      setSirketler(data);\n    } catch (err: any) {\n      setError(err.message);\n      console.error('Şirketleri getirme hatası:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSil = async (sirketId: number) => {\n    if (!confirm('Bu şirketi silmek istediğinize emin misiniz?')) {\n      return;\n    }\n\n    setSiliniyor(sirketId);\n\n    try {\n      const response = await fetch(`/api/sirketler/${sirketId}`, {\n        method: 'DELETE',\n      });\n\n      if (!response.ok) {\n        const data = await response.json();\n        throw new Error(data.error || 'Şirket silinirken bir hata oluştu');\n      }\n\n      setSirketler(sirketler.filter(sirket => sirket.sirket_id !== sirketId));\n    } catch (err: any) {\n      alert(`Hata: ${err.message}`);\n      console.error('Şirket silme hatası:', err);\n    } finally {\n      setSiliniyor(null);\n    }\n  };\n\n  return (\n    <main className=\"flex min-h-screen flex-col items-center p-12\">\n      <div className=\"w-full max-w-4xl\">\n        <div className=\"flex justify-between items-center mb-8\">\n          <h1 className=\"text-3xl font-bold\">Şirketler</h1>\n          <div className=\"flex space-x-2\">\n            <Link href=\"/veritabani-yonetimi\" className=\"p-2 border rounded-md hover:bg-gray-100\">\n              Geri Dön\n            </Link>\n            <Link href=\"/veritabani-yonetimi/sirketler/ekle\" className=\"p-2 bg-green-500 text-white rounded-md hover:bg-green-600\">\n              Yeni Şirket Ekle\n            </Link>\n          </div>\n        </div>\n\n        {error && (\n          <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4\">\n            <span className=\"block sm:inline\">{error}</span>\n          </div>\n        )}\n\n        {loading ? (\n          <div className=\"text-center py-10\">\n            <p className=\"text-gray-500\">Şirketler yükleniyor...</p>\n          </div>\n        ) : sirketler.length === 0 ? (\n          <div className=\"text-center py-10 border rounded-lg\">\n            <p className=\"text-gray-500\">Kayıtlı şirket bulunamadı.</p>\n            <Link href=\"/veritabani-yonetimi/sirketler/ekle\" className=\"mt-4 inline-block p-2 bg-blue-500 text-white rounded-md hover:bg-blue-600\">\n              Yeni Şirket Ekle\n            </Link>\n          </div>\n        ) : (\n          <div className=\"bg-white shadow-md rounded-lg overflow-hidden\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    ID\n                  </th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Şirket Adı\n                  </th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Vergi Numarası\n                  </th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    İşlemler\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {sirketler.map((sirket) => (\n                  <tr key={sirket.sirket_id}>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                      {sirket.sirket_id}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                      {sirket.sirket_adi}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                      {sirket.vergi_numarasi}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                      <div className=\"flex space-x-2\">\n                        <Link \n                          href={`/veritabani-yonetimi/sirketler/${sirket.sirket_id}/duzenle`} \n                          className=\"text-indigo-600 hover:text-indigo-900\"\n                        >\n                          Düzenle\n                        </Link>\n                        <button \n                          onClick={() => handleSil(sirket.sirket_id)}\n                          className=\"text-red-600 hover:text-red-900\"\n                          disabled={siliniyor === sirket.sirket_id}\n                        >\n                          {siliniyor === sirket.sirket_id ? 'Siliniyor...' : 'Sil'}\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </main>\n  );\n} "],"names":[],"mappings":"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","debugId":null}}]
}