(()=>{var e={};e.id=8750,e.ids=[8750],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5069:(e,r,a)=>{"use strict";a.d(r,{z:()=>s});var t=a(6330);let s=global.prisma||new t.PrismaClient},6330:e=>{"use strict";e.exports=require("@prisma/client")},6487:()=>{},8335:()=>{},8493:(e,r,a)=>{"use strict";a.r(r),a.d(r,{patchFetch:()=>f,routeModule:()=>d,serverHooks:()=>w,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>m});var t={};a.r(t),a.d(t,{DELETE:()=>p,GET:()=>l,PUT:()=>c});var s=a(6559),i=a(8088),n=a(7719),u=a(2190),o=a(5069);async function l(e,{params:r}){try{let{id:e}=await r,a=parseInt(e);if(isNaN(a))return u.NextResponse.json({error:"Ge\xe7ersiz ara\xe7 ID"},{status:400});let t=await o.z.araclar.findUnique({where:{arac_id:a},include:{sirket:!0}});if(!t)return u.NextResponse.json({error:"Ara\xe7 bulunamadı"},{status:404});return u.NextResponse.json(t)}catch(e){return console.error("Ara\xe7 getirme hatası:",e),u.NextResponse.json({error:"Ara\xe7 bilgileri getirilirken bir hata oluştu: "+e.message},{status:500})}}async function c(e,{params:r}){try{let{id:a}=await r,t=parseInt(a),{plaka:s,sofor_adi:i,vergi_numarasi:n,sirket_id:l}=await e.json();if(isNaN(t))return u.NextResponse.json({error:"Ge\xe7ersiz ara\xe7 ID"},{status:400});if(!s&&!i&&!n&&!l)return u.NextResponse.json({error:"G\xfcncellenecek en az bir alan belirtilmelidir"},{status:400});let c=await o.z.araclar.findUnique({where:{arac_id:t}});if(!c)return u.NextResponse.json({error:"Ara\xe7 bulunamadı"},{status:404});if(l&&c.sirket_id!==parseInt(l.toString())&&!await o.z.sirketler.findUnique({where:{sirket_id:parseInt(l.toString())}}))return u.NextResponse.json({error:"Belirtilen şirket bulunamadı"},{status:400});let p=await o.z.araclar.update({where:{arac_id:t},data:{...s&&{plaka:s},...i&&{sofor_adi:i},...n&&{vergi_numarasi:n},...l&&{sirket_id:parseInt(l.toString())}}});return u.NextResponse.json({basarili:!0,mesaj:"Ara\xe7 başarıyla g\xfcncellendi",arac:p})}catch(e){return console.error("Ara\xe7 g\xfcncelleme hatası:",e),u.NextResponse.json({error:"Ara\xe7 g\xfcncellenirken bir hata oluştu: "+e.message},{status:500})}}async function p(e,{params:r}){try{let{id:e}=await r,a=parseInt(e);if(isNaN(a))return u.NextResponse.json({error:"Ge\xe7ersiz ara\xe7 ID"},{status:400});if(!await o.z.araclar.findUnique({where:{arac_id:a}}))return u.NextResponse.json({error:"Ara\xe7 bulunamadı"},{status:404});if(await o.z.seferler.count({where:{arac_id:a}})>0)return u.NextResponse.json({error:"Bu ara\xe7la ilişkili seferler bulunduğu i\xe7in silinemez"},{status:400});if(await o.z.aracOdemeKayitlari.count({where:{arac_id:a}})>0)return u.NextResponse.json({error:"Bu ara\xe7la ilişkili \xf6deme kayıtları bulunduğu i\xe7in silinemez"},{status:400});return await o.z.araclar.delete({where:{arac_id:a}}),u.NextResponse.json({basarili:!0,mesaj:"Ara\xe7 başarıyla silindi"})}catch(e){if(console.error("Ara\xe7 silme hatası:",e),"P2003"===e.code)return u.NextResponse.json({error:"Bu ara\xe7la ilişkili kayıtlar bulunduğu i\xe7in silinemez"},{status:400});return u.NextResponse.json({error:"Ara\xe7 silinirken bir hata oluştu: "+e.message},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/araclar/[id]/route",pathname:"/api/araclar/[id]",filename:"route",bundlePath:"app/api/araclar/[id]/route"},resolvedPagePath:"/Users/yusufmertyavuz/Desktop/nakliyeemm/src/app/api/araclar/[id]/route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:x,workUnitAsyncStorage:m,serverHooks:w}=d;function f(){return(0,n.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:m})}},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var r=require("../../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[4447,580],()=>a(8493));module.exports=t})();