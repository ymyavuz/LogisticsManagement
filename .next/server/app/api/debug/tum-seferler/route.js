(()=>{var e={};e.id=6545,e.ids=[6545],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},889:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>m,routeModule:()=>l,serverHooks:()=>_,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>c});var s={};t.r(s),t.d(s,{GET:()=>d});var a=t(6559),i=t(8088),n=t(7719),o=t(2190),u=t(5069);async function d(e){try{let{searchParams:r}=new URL(e.url),t=r.get("sofor")||"Tahsin",s=r.get("arac_id")?parseInt(r.get("arac_id")||"0"):0,a={};if(s>0)a.arac_id=s;else{let e=await u.z.araclar.findFirst({where:{sofor_adi:{contains:t}}});if(!e)return o.NextResponse.json({error:`${t} isimli şof\xf6r bulunamadı`},{status:404});a.arac_id=e.arac_id}let i=await u.z.seferler.findMany({where:a,include:{sirket:!0},orderBy:{irsaliye_tarihi:"asc"}}),n=i.map(e=>({sefer_id:e.sefer_id,arac_id:e.arac_id,irsaliye_numarasi:e.irsaliye_numarasi,irsaliye_tarihi:e.irsaliye_tarihi,tahliye_yeri:e.tahliye_yeri,mt:e.mt,sirket_id:e.sirket_id,sirket_adi:e.sirket?.sirket_adi||"Bilinmeyen",sirketten_alinan_ucret:e.sirketten_alinan_ucret,sofore_odenen_ucret:e.sofore_odenen_ucret,ay:e.ay,donem:e.donem}));return o.NextResponse.json({sofor:t,arac_id:a.arac_id,seferSayisi:i.length,seferler:n})}catch(e){return console.error("Debug endpoint hatası:",e),o.NextResponse.json({error:"Seferler alınırken bir hata oluştu: "+e.message},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/debug/tum-seferler/route",pathname:"/api/debug/tum-seferler",filename:"route",bundlePath:"app/api/debug/tum-seferler/route"},resolvedPagePath:"/Users/yusufmertyavuz/Desktop/nakliyeemm/src/app/api/debug/tum-seferler/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:p,workUnitAsyncStorage:c,serverHooks:_}=l;function m(){return(0,n.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:c})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5069:(e,r,t)=>{"use strict";t.d(r,{z:()=>a});var s=t(6330);let a=global.prisma||new s.PrismaClient},6330:e=>{"use strict";e.exports=require("@prisma/client")},6487:()=>{},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,580],()=>t(889));module.exports=s})();