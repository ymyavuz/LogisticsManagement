(()=>{var e={};e.id=8431,e.ids=[8431],e.modules={440:(e,r,i)=>{"use strict";i.r(r),i.d(r,{default:()=>a});var t=i(1658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},590:(e,r,i)=>{"use strict";i.r(r),i.d(r,{GlobalError:()=>l.a,__next_app__:()=>c,pages:()=>m,routeModule:()=>p,tree:()=>d});var t=i(5239),a=i(8088),s=i(8170),l=i.n(s),n=i(893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);i.d(r,o);let d={children:["",{children:["veritabani-yonetimi",{children:["fiyat-listesi",{children:["ekle",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,4559)),"/Users/yusufmertyavuz/Desktop/nakliyeemm/src/app/veritabani-yonetimi/fiyat-listesi/ekle/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(i.bind(i,4431)),"/Users/yusufmertyavuz/Desktop/nakliyeemm/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(i.t.bind(i,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(i.t.bind(i,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,m=["/Users/yusufmertyavuz/Desktop/nakliyeemm/src/app/veritabani-yonetimi/fiyat-listesi/ekle/page.tsx"],c={require:i,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/veritabani-yonetimi/fiyat-listesi/ekle/page",pathname:"/veritabani-yonetimi/fiyat-listesi/ekle",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1067:(e,r,i)=>{Promise.resolve().then(i.bind(i,3227))},1134:(e,r,i)=>{Promise.resolve().then(i.bind(i,5409))},1135:()=>{},2624:(e,r,i)=>{Promise.resolve().then(i.t.bind(i,6444,23)),Promise.resolve().then(i.t.bind(i,6042,23)),Promise.resolve().then(i.t.bind(i,8170,23)),Promise.resolve().then(i.t.bind(i,9477,23)),Promise.resolve().then(i.t.bind(i,9345,23)),Promise.resolve().then(i.t.bind(i,2089,23)),Promise.resolve().then(i.t.bind(i,6577,23)),Promise.resolve().then(i.t.bind(i,1307,23))},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3227:(e,r,i)=>{"use strict";i.d(r,{D:()=>n,ThemeProvider:()=>l});var t=i(687),a=i(3210);let s=(0,a.createContext)(void 0);function l({children:e}){let[r,i]=(0,a.useState)("dark");return(0,t.jsx)(s.Provider,{value:{theme:r,toggleTheme:()=>{i(e=>"dark"===e?"light":"dark")}},children:e})}function n(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4431:(e,r,i)=>{"use strict";i.r(r),i.d(r,{default:()=>m,metadata:()=>d});var t=i(7413),a=i(2202),s=i.n(a),l=i(4988),n=i.n(l);i(1135);var o=i(9577);let d={title:"Nakliyeem",description:"Nakliye Y\xf6netim Sistemi"};function m({children:e}){return(0,t.jsx)("html",{lang:"tr",children:(0,t.jsx)("body",{className:`${s().variable} ${n().variable} antialiased`,children:(0,t.jsx)(o.ThemeProvider,{children:e})})})}},4559:(e,r,i)=>{"use strict";i.r(r),i.d(r,{default:()=>t});let t=(0,i(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/yusufmertyavuz/Desktop/nakliyeemm/src/app/veritabani-yonetimi/fiyat-listesi/ekle/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/yusufmertyavuz/Desktop/nakliyeemm/src/app/veritabani-yonetimi/fiyat-listesi/ekle/page.tsx","default")},5409:(e,r,i)=>{"use strict";i.r(r),i.d(r,{default:()=>o});var t=i(687),a=i(3210),s=i(5814),l=i.n(s),n=i(3103);function o(){let[e,r]=(0,a.useState)([]),[i,s]=(0,a.useState)(""),[o,d]=(0,a.useState)(!0),[m,c]=(0,a.useState)(null),[p,h]=(0,a.useState)({varisNoktasi:"",km:"",sirketTirFiyati:"",sirketKirkayakFiyati:"",soforTirFiyati:"",soforKirkayakFiyati:""}),[u,y]=(0,a.useState)([]),[x,b]=(0,a.useState)(!1),k=e=>{let{name:r,value:i}=e.target;"seciliSirket"===r?s(""===i?"":parseInt(i,10)):h(e=>({...e,[r]:i}))},f=e=>{y(r=>r.filter((r,i)=>i!==e))},v=async()=>{if(!i)return void alert("L\xfctfen bir şirket se\xe7in");if(0===u.length)return void alert("L\xfctfen en az bir fiyat ekleyin");try{d(!0);let e=u.filter(e=>e.sirketTirFiyati||e.soforTirFiyati).map(e=>({sirket_id:i,tahliye_yeri:e.varisNoktasi,km:e.km?parseFloat(e.km):null,arac_tipi:"Tır",ucret:e.sirketTirFiyati?parseFloat(e.sirketTirFiyati):0,sofor_ucreti:e.soforTirFiyati?parseFloat(e.soforTirFiyati):null})),r=u.filter(e=>e.sirketKirkayakFiyati||e.soforKirkayakFiyati).map(e=>({sirket_id:i,tahliye_yeri:e.varisNoktasi,km:e.km?parseFloat(e.km):null,arac_tipi:"Kırkayak",ucret:e.sirketKirkayakFiyati?parseFloat(e.sirketKirkayakFiyati):0,sofor_ucreti:e.soforKirkayakFiyati?parseFloat(e.soforKirkayakFiyati):null})),t=[...e,...r],a=await fetch("/api/fiyat-listesi/sirket",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sirket_id:i,fiyatlar:t})});if(!a.ok){let e=await a.json();throw Error(e.error||"Fiyat listesi kaydedilirken bir hata oluştu")}await a.json(),c({basarili:!0,mesaj:"Fiyat listesi başarıyla kaydedildi!"}),y([])}catch(e){console.error("Fiyat listesi kaydedilirken hata:",e),c({basarili:!1,mesaj:`Hata: ${e.message}`})}finally{d(!1)}};return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Yeni Fiyat Listesi Ekle"}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-2 font-medium",children:"Şirket Se\xe7in"}),(0,t.jsxs)("select",{name:"seciliSirket",value:i,onChange:k,className:"w-full p-2 border rounded-md",disabled:o,children:[(0,t.jsx)("option",{value:"",children:"Şirket Se\xe7in"}),e.map(e=>(0,t.jsx)("option",{value:e.sirket_id,children:e.sirket_adi},e.sirket_id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-2 font-medium",children:"Excel Dosyası Y\xfckle"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("input",{type:"file",accept:".xlsx,.xls",onChange:e=>{let r=e.target.files?.[0];if(!r)return;if(!i){alert("L\xfctfen \xf6nce bir şirket se\xe7in"),e.target.value="";return}b(!0);let t=new FileReader;t.onload=r=>{try{let e=new Uint8Array(r.target?.result),i=n.LF(e,{type:"array"}),t=i.SheetNames[0],a=i.Sheets[t],s=n.Wp.sheet_to_json(a,{header:1}).slice(1),l=[];s.forEach((e,r)=>{if(!e[0]||""===e[0].toString().trim())return;let i=e[0]?.toString().trim()||"",t=e[1]?parseFloat(e[1].toString()):"",a=e[2]?parseFloat(e[2].toString()):"",s=e[3]?parseFloat(e[3].toString()):"",n=e[4]?parseFloat(e[4].toString()):"";i&&l.push({varisNoktasi:i,km:"",sirketTirFiyati:t?t.toString():"",sirketKirkayakFiyati:a?a.toString():"",soforTirFiyati:s?s.toString():"",soforKirkayakFiyati:n?n.toString():""})}),l.length>0?(y(e=>[...e,...l]),c({basarili:!0,mesaj:`Excel dosyasından ${l.length} fiyat başarıyla y\xfcklendi!`})):c({basarili:!1,mesaj:"Excel dosyasında ge\xe7erli veri bulunamadı. L\xfctfen format kontrol\xfc yapın."})}catch(e){console.error("Excel okuma hatası:",e),c({basarili:!1,mesaj:"Excel dosyası okunurken bir hata oluştu. L\xfctfen dosya formatını kontrol edin."})}finally{b(!1),e.target.value=""}},t.readAsArrayBuffer(r)},disabled:!i||x,className:"w-full p-2 border rounded-md file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Excel formatı: 1.S\xfctun: Tahliye Yeri, 2.S\xfctun: Tır \xdccreti, 3.S\xfctun: Kırkayak \xdccreti, 4.S\xfctun: Tır Ş\xf6f\xf6r \xdccreti, 5.S\xfctun: Kırkayak Ş\xf6f\xf6r \xdccreti"}),x&&(0,t.jsx)("p",{className:"text-sm text-blue-600",children:"Excel dosyası işleniyor..."})]})]})]}),(0,t.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 rounded-md",children:[(0,t.jsx)("h3",{className:"font-medium text-blue-800 mb-2",children:"Excel Dosyası Format Bilgisi:"}),(0,t.jsxs)("div",{className:"text-sm text-blue-700 space-y-1",children:[(0,t.jsx)("p",{children:"• 1. S\xfctun: Tahliye Yeri (\xf6rn: Ankara, İstanbul)"}),(0,t.jsx)("p",{children:"• 2. S\xfctun: Tır i\xe7in Şirket \xdccreti (\xf6rn: 2500)"}),(0,t.jsx)("p",{children:"• 3. S\xfctun: Kırkayak i\xe7in Şirket \xdccreti (\xf6rn: 2000)"}),(0,t.jsx)("p",{children:"• 4. S\xfctun: Tır i\xe7in Ş\xf6f\xf6r \xdccreti (\xf6rn: 1800)"}),(0,t.jsx)("p",{children:"• 5. S\xfctun: Kırkayak i\xe7in Ş\xf6f\xf6r \xdccreti (\xf6rn: 1500)"}),(0,t.jsx)("p",{className:"font-medium",children:"Not: İlk satır başlık olarak kabul edilir ve atlanır."})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Yeni Fiyat Ekle"}),(0,t.jsxs)("form",{onSubmit:e=>(e.preventDefault(),p.varisNoktasi)?p.sirketTirFiyati||p.sirketKirkayakFiyati||p.soforTirFiyati||p.soforKirkayakFiyati?void(y(e=>[...e,{...p}]),h({varisNoktasi:"",km:"",sirketTirFiyati:"",sirketKirkayakFiyati:"",soforTirFiyati:"",soforKirkayakFiyati:""})):void alert("En az bir fiyat girmelisiniz"):void alert("L\xfctfen varış noktasını girin"),className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"md:col-span-3 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-2 font-medium",children:"Varış Noktası"}),(0,t.jsx)("input",{type:"text",name:"varisNoktasi",value:p.varisNoktasi,onChange:k,className:"w-full p-2 border rounded-md",placeholder:"\xd6rn: Ankara",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-2 font-medium",children:"Km"}),(0,t.jsx)("input",{type:"number",name:"km",value:p.km,onChange:k,className:"w-full p-2 border rounded-md",placeholder:"\xd6rn: 250"})]})]}),(0,t.jsxs)("div",{className:"md:col-span-3",children:[(0,t.jsx)("h3",{className:"font-medium border-b pb-2 mb-4",children:"Şirket Fiyatları"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-2 font-medium",children:"Tır Fiyatı (₺)"}),(0,t.jsx)("input",{type:"number",name:"sirketTirFiyati",value:p.sirketTirFiyati,onChange:k,className:"w-full p-2 border rounded-md",placeholder:"\xd6rn: 2500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-2 font-medium",children:"Kırkayak Fiyatı (₺)"}),(0,t.jsx)("input",{type:"number",name:"sirketKirkayakFiyati",value:p.sirketKirkayakFiyati,onChange:k,className:"w-full p-2 border rounded-md",placeholder:"\xd6rn: 2000"})]})]})]}),(0,t.jsxs)("div",{className:"md:col-span-3",children:[(0,t.jsx)("h3",{className:"font-medium border-b pb-2 mb-4",children:"Şof\xf6r Fiyatları"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-2 font-medium",children:"Tır Fiyatı (₺)"}),(0,t.jsx)("input",{type:"number",name:"soforTirFiyati",value:p.soforTirFiyati,onChange:k,className:"w-full p-2 border rounded-md",placeholder:"\xd6rn: 1800"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-2 font-medium",children:"Kırkayak Fiyatı (₺)"}),(0,t.jsx)("input",{type:"number",name:"soforKirkayakFiyati",value:p.soforKirkayakFiyati,onChange:k,className:"w-full p-2 border rounded-md",placeholder:"\xd6rn: 1500"})]})]})]}),(0,t.jsx)("div",{className:"md:col-span-3",children:(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",disabled:o,children:"Fiyat Ekle"})})]})]}),u.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Fiyat Listesi"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full bg-white border",children:[(0,t.jsxs)("thead",{className:"bg-gray-100",children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"py-2 px-4 border text-left",children:"Varış Noktası"}),(0,t.jsx)("th",{className:"py-2 px-4 border text-left",children:"Km"}),(0,t.jsx)("th",{className:"py-2 px-4 border text-left",colSpan:2,children:"Şirket Fiyatları (₺)"}),(0,t.jsx)("th",{className:"py-2 px-4 border text-left",colSpan:2,children:"Şof\xf6r Fiyatları (₺)"}),(0,t.jsx)("th",{className:"py-2 px-4 border text-left",children:"İşlemler"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"py-2 px-4 border text-left"}),(0,t.jsx)("th",{className:"py-2 px-4 border text-left"}),(0,t.jsx)("th",{className:"py-2 px-4 border text-left",children:"Tır"}),(0,t.jsx)("th",{className:"py-2 px-4 border text-left",children:"Kırkayak"}),(0,t.jsx)("th",{className:"py-2 px-4 border text-left",children:"Tır"}),(0,t.jsx)("th",{className:"py-2 px-4 border text-left",children:"Kırkayak"}),(0,t.jsx)("th",{className:"py-2 px-4 border text-left"})]})]}),(0,t.jsx)("tbody",{children:u.map((e,r)=>(0,t.jsxs)("tr",{className:r%2==0?"bg-gray-50":"",children:[(0,t.jsx)("td",{className:"py-2 px-4 border",children:e.varisNoktasi}),(0,t.jsx)("td",{className:"py-2 px-4 border",children:e.km||"-"}),(0,t.jsx)("td",{className:"py-2 px-4 border",children:e.sirketTirFiyati||"-"}),(0,t.jsx)("td",{className:"py-2 px-4 border",children:e.sirketKirkayakFiyati||"-"}),(0,t.jsx)("td",{className:"py-2 px-4 border",children:e.soforTirFiyati||"-"}),(0,t.jsx)("td",{className:"py-2 px-4 border",children:e.soforKirkayakFiyati||"-"}),(0,t.jsx)("td",{className:"py-2 px-4 border",children:(0,t.jsx)("button",{onClick:()=>f(r),className:"px-2 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 text-xs",children:"Kaldır"})})]},r))})]})}),(0,t.jsx)("div",{className:"mt-6 flex justify-end",children:(0,t.jsx)("button",{onClick:v,className:"px-6 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",disabled:o,children:o?"Kaydediliyor...":"Fiyat Listesini Kaydet"})})]}),m&&(0,t.jsx)("div",{className:`p-4 mb-8 rounded-md ${m.basarili?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.mesaj}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)(l(),{href:"/veritabani-yonetimi/fiyat-listesi",className:"px-4 py-2 border rounded-md hover:bg-gray-100",children:"Fiyat Listelerine D\xf6n"}),(0,t.jsx)(l(),{href:"/veritabani-yonetimi",className:"px-4 py-2 border rounded-md hover:bg-gray-100",children:"Veritabanı Y\xf6netimine D\xf6n"})]})]})}},6643:(e,r,i)=>{Promise.resolve().then(i.bind(i,9577))},7472:(e,r,i)=>{Promise.resolve().then(i.t.bind(i,6346,23)),Promise.resolve().then(i.t.bind(i,7924,23)),Promise.resolve().then(i.t.bind(i,5656,23)),Promise.resolve().then(i.t.bind(i,99,23)),Promise.resolve().then(i.t.bind(i,8243,23)),Promise.resolve().then(i.t.bind(i,8827,23)),Promise.resolve().then(i.t.bind(i,2763,23)),Promise.resolve().then(i.t.bind(i,7173,23))},7574:(e,r,i)=>{Promise.resolve().then(i.bind(i,4559))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9577:(e,r,i)=>{"use strict";i.d(r,{ThemeProvider:()=>a});var t=i(2907);let a=(0,t.registerClientReference)(function(){throw Error("Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/yusufmertyavuz/Desktop/nakliyeemm/src/app/context/ThemeContext.tsx","ThemeProvider");(0,t.registerClientReference)(function(){throw Error("Attempted to call useTheme() from the server but useTheme is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/yusufmertyavuz/Desktop/nakliyeemm/src/app/context/ThemeContext.tsx","useTheme")}};var r=require("../../../../webpack-runtime.js");r.C(e);var i=e=>r(r.s=e),t=r.X(0,[4447,169,1658,5814,3103],()=>i(590));module.exports=t})();